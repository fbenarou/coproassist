generator client {
  provider = "prisma-client-js"
  output   = "./node_modules/@prisma/client"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Copropriete {
  id   Int    @id @default(autoincrement())
  nom  String
  lots Lot[]
}

model Lot {
  id            Int            @id @default(autoincrement())
  numero        String
  surface       Float?
  coproprieteId Int
  appartenances Appartenance[]
  copropriete   Copropriete    @relation(fields: [coproprieteId], references: [id])
}

model Coproprietaire {
  id            Int            @id @default(autoincrement())
  nom           String
  email         String?
  telephone     String?
  appartenances Appartenance[]
}

model Appartenance {
  id               Int            @id @default(autoincrement())
  lotId            Int
  coproprietaireId Int
  pourcentage      Float
  coproprietaire   Coproprietaire @relation(fields: [coproprietaireId], references: [id])
  lot              Lot            @relation(fields: [lotId], references: [id])

  @@unique([lotId, coproprietaireId])
}

model User {
  id        String   @id @default(cuid())
  email     String   @unique
  password  String
  name      String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}
